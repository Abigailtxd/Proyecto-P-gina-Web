<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Test Vocacional T√©cnico</title>
<style>
  :root{ --chart-max-px: 100px; }
body {
  font-family: Arial, sans-serif;
  background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('./Img/slide-3.jpg');
   background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  margin: 0;
  padding: 24px;
  min-height: 100vh;
 display: flex;
  justify-content: center;
  align-items: flex-start; /* üîπ antes era center */
  flex-direction: column;
  min-height: 100vh;
  padding-top: 60px; /* üîπ espacio para que baje un poco */
  position: relative;
  overflow-x: hidden;

  /* üîπ Fondo transl√∫cido encima de la imagen (sin difuminarla) */
  backdrop-filter: none;
}
body::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

  background: rgba(0, 0, 0, 0.3); /* leve oscurecido */
  backdrop-filter: blur(10px); /* üîπ Borroso */
  -webkit-backdrop-filter: blur(10px);

  z-index: 0; /* queda detr√°s del cuadro */
}
  .card{     position: relative;
  z-index: 1;
  text-align: center;
  max-width: 500px;
  width: 90%;
  margin: 0 auto;background:white;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.2);width:90%;max-width:1100px;overflow:hidden; margin-bottom:24px;}
  .header{ padding:24px;border-bottom:1px solid #eee; }
  .header h1{ margin:0;font-size:24px; }
  .header p{ color:#666;margin:6px 0 0;font-size:14px; }

  .progress-wrap{padding:0 24px;display:flex;align-items:center;gap:12px;margin-bottom:12px;}
  .progressbar{flex:1;height:10px;background:#eee;border-radius:999px;overflow:hidden;}
  .progressbar>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#111827,#374151);transition:width .25s;}
  .progress-text{font-size:12px;color:#666;white-space:nowrap;}

  .stage{padding:24px;display:grid;gap:16px;}
  .q-text{font-size:18px;font-weight:600;}
  .answers{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;}
.btn {
  padding: 12px 16px;
  border-radius: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  color: #fff;
  transform: translateY(0);
}

/* Efecto hover y active: invierte colores */
.btn:hover, .btn:active {
  background: #fff;
  transform: translateY(-1px);
}

/* Bot√≥n ‚ÄúS√≠‚Äù */
.btn-yes {
  background: #16a34a;
  border: 1px solid #16a34a;
}
.btn-yes:hover, .btn-yes:active {
  color: #16a34a;
}

/* Bot√≥n ‚ÄúTal vez‚Äù */
.btn-maybe {
  background: #ca8a04;
  border: 1px solid #ca8a04;
}
.btn-maybe:hover, .btn-maybe:active {
  color: #ca8a04;
}

/* Bot√≥n ‚ÄúNo‚Äù */
.btn-no {
  background: #dc2626;
  border: 1px solid #dc2626;
}
.btn-no:hover, .btn-no:active {
  color: #dc2626;
}

  .btn.link{background:none;border:none;color:#111;font-size:16px;text-decoration:underline;}
  .actions {
  display: flex;
  justify-content: center;
  gap: 20px; /* espacio entre botones */
  margin-top: 20px;
}

.actions .btn {
  padding: 12px 20px;       /* tama√±o del bot√≥n */
  border-radius: 12px;
  border: 2px solid #111;   /* borde visible */
  font-weight: 600;
  cursor: pointer;
  color: #fff;               /* texto blanco */
  background: #111;          /* fondo del color del borde */
  transition: all 0.25s ease;
}

.actions .btn:hover,
.actions .btn:active {
  background: #fff;          /* fondo blanco al pasar cursor o click */
  color: #111;               /* texto del color original del bot√≥n */
  transform: translateY(-1px);
}
  /* Resultados */
  .result{padding:24px;display:grid;gap:16px;}
  
  .top-display{ display:flex; flex-direction:column; align-items:center; gap:8px; margin-bottom:14px; position:relative; overflow:visible; }
  .top-display img{ width:160px; height:auto; border-radius:8px; box-shadow:0 6px 14px rgba(0,0,0,0.08); border:2px solid #ddd; background:#fff; display:block; }
  .top-display .top-text{ font-weight:800; font-size:16px; text-align:center; color:#222; max-width:820px; }

  .jump { animation: jump-anim 700ms cubic-bezier(.2,.9,.2,1); }
  @keyframes jump-anim {
    0%   { transform: translateY(28px) scale(0.9); opacity: 0; }
    45%  { transform: translateY(-12px) scale(1.08); opacity: 1; }
    70%  { transform: translateY(6px) scale(0.98); }
    100% { transform: translateY(0) scale(1); }
  }

  .confetti-layer{ pointer-events:none; position:absolute; top:0; left:0; right:0; bottom:0; overflow:visible; z-index:999; }
  .confetti-piece{ position:absolute; width:10px; height:14px; opacity:0.95; will-change: transform, opacity; border-radius:2px; transform-origin: center; animation: confetti-fall 1400ms linear forwards; }
  @keyframes confetti-fall {
    0%   { transform: translate3d(0,-20px,0) rotate(0deg) scale(1); opacity:1; }
    100% { transform: translate3d(0,260px,0) rotate(720deg) scale(0.9); opacity:0.9; }
  }

  /* Barras verticales de resultados */
  .chart-area{ padding:18px 24px 6px 24px; border-radius:8px; }
  .chart-row{ display:flex; justify-content:space-around; gap:36px; align-items:flex-end; height: calc(var(--chart-max-px) + 64px); margin-bottom:20px; }
  .bar-column{ display:flex; flex-direction:column; align-items:center; width:120px; }
  .bar-vertical{ position:relative; width:86px; height: calc(var(--chart-max-px) + 6px); display:block; border:2px solid #000; background:#fff; box-sizing:border-box; overflow:visible; }
  .bar-fill{ position:absolute; left:0; bottom:0; width:100%; display:flex; align-items:flex-end; justify-content:center; font-weight:700; font-size:13px; line-height:1; transition: height 700ms cubic-bezier(.2,.9,.2,1), opacity .3s; box-sizing:border-box; padding-bottom:4px; }
  .bar-fill .pct-inside{ position:relative; z-index:2; pointer-events:none; }
  .pct-top{ position:absolute; top:-22px; width:100%; text-align:center; font-weight:800; font-size:13px; color:#000; z-index:3; }
  .small-icon{ display:block; margin-bottom:4px; font-size:18px; }
</style>
</head>
<body>
<div class="card" id="app"></div>

<script>
/* ====================== DATOS DEL TEST ====================== */
const AREAS = [
  {key:'civiles',icon:'üèóÔ∏è',name:'Construcciones Civiles',questions:[
    '¬øTe interesa planificar y supervisar obras desde el dise√±o hasta su finalizaci√≥n?',
    '¬øTe sientes c√≥modo trabajando con planos arquitect√≥nicos y estructurales?',
    '¬øPodr√≠as adaptarte a supervisar equipos en obras al aire libre?',
    '¬øTe atrae calcular materiales y costos para proyectos de construcci√≥n?',
    '¬øTe gusta resolver problemas pr√°cticos relacionados con estructuras?',
    '¬øTe interesar√≠a aprender sobre normas de seguridad e higiene?',
    '¬øTe motiva coordinar distintos profesionales para cumplir un plazo de obra?'
  ]},
  {key:'electricidad',icon:'‚ö°',name:'Electricidad',questions:[
    '¬øTe atrae instalar y reparar sistemas el√©ctricos?',
    '¬øTe interesa comprender el funcionamiento de circuitos el√©ctricos?',
    '¬øTrabajar√≠as con comodidad con tensi√≥n y corriente bajo protocolos de seguridad?',
    '¬øTe motiva diagnosticar fallas el√©ctricas y proponer soluciones?',
    '¬øPodr√≠as mantenerte concentrado para evitar accidentes?',
    '¬øTe atrae calcular capacidad de cables, transformadores y protecciones?',
    '¬øTe interesa mantenerse actualizado sobre nuevas tecnolog√≠as de energ√≠a?'
  ]},
  {key:'electronica',icon:'üîå',name:'Electr√≥nica',questions:[
    '¬øTe atrae armar y reparar placas electr√≥nicas?',
    '¬øDisfrutas interpretar esquemas y diagramas electr√≥nicos?',
    '¬øTe motiva trabajar con herramientas de precisi√≥n?',
    '¬øPodr√≠as dedicar tiempo a soldar, medir y calibrar componentes delicados?',
    '¬øTe interesa programar sistemas electr√≥nicos embebidos?',
    '¬øTe gusta investigar nuevas aplicaciones de la electr√≥nica?',
    '¬øPodr√≠as seguir procedimientos t√©cnicos detallados durante varias horas?'
  ]},
  {key:'electromecanica',icon:'‚öôÔ∏è',name:'Electromec√°nica',questions:[
    '¬øTe interesa trabajar en sistemas que combinan electricidad y mec√°nica?',
    '¬øTe atrae comprender maquinaria industrial automatizada?',
    '¬øPodr√≠as realizar tareas de diagn√≥stico el√©ctrico y mec√°nico?',
    '¬øTe motiva resolver problemas t√©cnicos interdisciplinarios?',
    '¬øTe gustar√≠a trabajar con equipos de gran porte?',
    '¬øPodr√≠as adaptarte a trabajos que implican esfuerzo f√≠sico y precisi√≥n?',
    '¬øTe interesa participar en proyectos de mejora industrial?'
  ]},
  {key:'informatica',icon:'üíª',name:'Inform√°tica',questions:[
    '¬øTe motiva programar soluciones a problemas?',
    '¬øTe gusta trabajar con bases de datos y sistemas de informaci√≥n?',
    '¬øPodr√≠as pasar horas concentrado frente a una computadora?',
    '¬øTe interesa la ciberseguridad y el resguardo de datos?',
    '¬øTe atrae dise√±ar interfaces o mejorar la experiencia de usuario?',
    '¬øPodr√≠as aprender nuevas herramientas y lenguajes por tu cuenta?',
    '¬øDisfrutas resolver problemas con an√°lisis y l√≥gica?'
  ]},
  {key:'mecanica',icon:'üîß',name:'Mec√°nica General',questions:[
    '¬øTe gusta trabajar con herramientas manuales y maquinaria?',
    '¬øTe interesa fabricar o reparar piezas met√°licas?',
    '¬øPodr√≠as interpretar planos mec√°nicos con precisi√≥n?',
    '¬øTe atrae comprender sistemas mec√°nicos complejos?',
    '¬øTe motiva mejorar la eficiencia de m√°quinas y herramientas?',
    '¬øPodr√≠as mantenerte enfocado en tareas repetitivas?',
    '¬øTe interesar√≠a aprender soldadura y t√©cnicas de uni√≥n de metales?'
  ]},
  {key:'automotriz',icon:'üöó',name:'Mec√°nica Automotriz',questions:[
    '¬øTe gusta diagnosticar y reparar fallas en autom√≥viles?',
    '¬øTe interesa comprender motores y sistemas h√≠bridos o el√©ctricos?',
    '¬øPodr√≠as trabajar en un taller rodeado de ruidos y aceites?',
    '¬øTe atrae aprender sobre transmisi√≥n, frenos y suspensi√≥n?',
    '¬øTe motiva buscar soluciones r√°pidas para veh√≠culos?',
    '¬øPodr√≠as adaptarte a herramientas mec√°nicas y sistemas electr√≥nicos?',
    '¬øTe interesar√≠a estar al d√≠a con innovaciones automotrices?'
  ]},
  {key:'quimica',icon:'‚öóÔ∏è',name:'Qu√≠mica Industrial',questions:[
    '¬øTe atrae analizar y transformar materiales mediante procesos qu√≠micos?',
    '¬øTe interesa trabajar en laboratorios con normas de seguridad estrictas?',
    '¬øPodr√≠as seguir protocolos experimentales con precisi√≥n?',
    '¬øTe motiva aprender sobre control de calidad y tratamiento de residuos?',
    '¬øTe atrae trabajar en industrias alimenticias, farmac√©uticas o petroqu√≠micas?',
    '¬øTe interesa medir y controlar variables como temperatura y presi√≥n?',
    '¬øPodr√≠as registrar y reportar resultados t√©cnicos de forma ordenada?'
  ]}
];

const COLORS = {
  informatica:"#800020", quimica:"#FFFFFF", electromecanica:"#0000FF",
  civiles:"#FFFDD0", electricidad:"#87CEEB", automotriz:"#000080",
  electronica:"#808080", mecanica:"#008000"
};

const IMAGE_PATHS = {
  civiles:       './Img/cc_c.png',
  electricidad:  './Img/edad_c.png',
  electronica:   './Img/eik_c.png',
  electromecanica:'./Img/emca_c.png',
  informatica:   './Img/info_c.png',
  mecanica:      './Img/indu_c.png',
  automotriz:    './Img/auto_c.png',
  quimica:       './Img/qca_c.png'
};

const IMAGE_TEXTS = {
  civiles: 'Construcciones Civiles ‚Äî Supervisar y planificar obras, c√°lculos y coordinaci√≥n de equipos.',
  electricidad: 'Electricidad ‚Äî Instalaci√≥n, diagn√≥stico y trabajo con circuitos y sistemas el√©ctricos.',
  electronica: 'Electr√≥nica ‚Äî Montaje y reparaci√≥n de placas, microcontroladores y dispositivos electr√≥nicos.',
  electromecanica: 'Electromec√°nica ‚Äî Mantenimiento e integraci√≥n entre sistemas el√©ctricos y mec√°nicos.',
  informatica: 'Inform√°tica ‚Äî Programaci√≥n, bases de datos, ciberseguridad y desarrollo de software.',
  mecanica: 'Mec√°nica General ‚Äî Fabricaci√≥n y reparaci√≥n de piezas, uso de herramientas y precisi√≥n mec√°nica.',
  automotriz: 'Mec√°nica Automotriz ‚Äî Diagn√≥stico y reparaci√≥n de veh√≠culos, motores y sistemas automotrices.',
  quimica: 'Qu√≠mica Industrial ‚Äî Procesos qu√≠micos, control de calidad y trabajo en laboratorio.'
};

const ALL = AREAS.flatMap(a=>a.questions.map((q,i)=>({text:q,area:a.key,index:i}))); 
const TOTAL = ALL.length;
let current = -1;
const answers = Array(TOTAL).fill(null);

const app = document.getElementById('app');

/* ====================== FUNCIONES PRINCIPALES ====================== */
function render(){
  if(current===-1){
    app.innerHTML=`<div class="header"><h1>Test Vocacional T√©cnico</h1><p>Este test est√° pensado para orientarte y mostrarte las √°reas t√©cnicas que m√°s coinciden con tus respuestas. No define tu futuro, solo te da una idea seg√∫n tus intereses y habilidades.</p></div>
    <div class="stage"><button class="btn link" onclick="next()">Comenzar</button></div>`;
  }else if(current<TOTAL){
    const q=ALL[current];
    app.innerHTML=`<div class="header"><h1>Pregunta ${current+1} de ${TOTAL}</h1>
      <div class="progress-wrap">
        <div class="progressbar"><i style="width:${(current/TOTAL*100)}%"></i></div>
        <div class="progress-text">${current+1} / ${TOTAL}</div>
      </div>
    </div>
    <div class="stage">
      <div class="q-text">${q.text}</div>
      <div class="answers">
        <button class="btn btn-yes" onclick="answer(2)">S√≠</button>
        <button class="btn btn-maybe" onclick="answer(1)">Depende</button>
        <button class="btn btn-no" onclick="answer(0)">No</button>
      </div>
    </div>`;
  }else renderResults();
}
function next(){current++;render();}
function answer(v){answers[current]=v;next();}

/* ====================== RESULTADOS ====================== */
function renderResults(){
  app.innerHTML=`<div class="header"><h1>Resultados</h1></div>
  <div class="result">
    <div id="topDisplay" class="top-display"></div>
    <div class="confetti-layer" id="confetti"></div>
    <div id="chart" class="chart-area"></div>
<div class="actions">
  <button class="btn link" onclick="location.reload()">Volver a intentar</button>
  <button class="btn link" onclick="window.location.href='espe.html'">Ir al inicio</button>
</div>

  </div>`;
  renderChart();
  launchConfetti();
}

/* ====================== C√ÅLCULOS ====================== */
function computeByArea(){
  const byArea=Object.fromEntries(AREAS.map(a=>[a.key,{name:a.name,icon:a.icon,score:0,max:(a.questions.length)*2}]));
  ALL.forEach((q,i)=>{byArea[q.area].score+=answers[i];});
  for(let k in byArea)byArea[k].pct=(byArea[k].score/byArea[k].max*100);
  return byArea;
}

/* ====================== RENDER CHART ====================== */
function renderChart(){
  const byArea=computeByArea();
  const entries=Object.entries(byArea);
  const topEntry=entries.slice().sort((a,b)=>b[1].pct-a[1].pct)[0];
  const topKey=topEntry[0];
  const topData=topEntry[1];

  const topDisplay=document.getElementById('topDisplay');
  const imgSrc=IMAGE_PATHS[topKey]||'';
  const imgText=IMAGE_TEXTS[topKey]||topData.name;
  topDisplay.innerHTML=`<img class="jump" src="${imgSrc}" alt="${topData.name}" /><div class="top-text">${imgText}</div>`;

  const chart=document.getElementById('chart');
  chart.innerHTML='';

  // Organizar barras en dos filas
  const firstRow=entries.slice(0,4);
  const secondRow=entries.slice(4);

  function createBarHtml(key,data){
    const pct=Math.round(data.pct);
    const pxHeight=pct;
    const color=COLORS[key]||"#999";
    const isDarkTextWhite = ["informatica","automotriz","electromecanica"].includes(key);
    const showInside=(pxHeight>20)||(key==='quimica');
    const insideColor=(key==='quimica')?'#000':(isDarkTextWhite?'#fff':'#000');
    const insideHtml=`<div class="pct-inside" style="color:${insideColor}">${pct}%</div>`;
    const topLabel=!showInside?`<div class="pct-top">${pct}%</div>`:'';
    return `
      <div class="bar-column">
        <div class="bar-vertical" data-key="${key}">
          ${topLabel}
          <div class="bar-fill" style="height:${pxHeight}px;background:${color};">${insideHtml}</div>
        </div>
        <div class="bar-label"><span class="small-icon">${data.icon}</span>${data.name}</div>
      </div>
    `;
  }

  chart.innerHTML=`
    <div class="chart-row" id="row1">${firstRow.map(([k,a])=>createBarHtml(k,a)).join('')}</div>
    <div class="chart-row" id="row2">${secondRow.map(([k,a])=>createBarHtml(k,a)).join('')}</div>
  `;
}

/* ====================== CONFETTI ====================== */
function launchConfetti(){
  const layer = document.getElementById('confetti');
  for(let i = 0; i < 100; i++){
    const c = document.createElement('div');
    c.className = 'confetti-piece';
    c.style.background = ['#ff0','#f00','#0f0','#0ff','#00f','#f0f'][Math.floor(Math.random()*6)];
    c.style.left = Math.random()*100 + '%';
    c.style.animationDuration = (Math.random()*1000+800) + 'ms';
    layer.appendChild(c);
  }

  // Limpiar confeti despu√©s de 3 segundos (3000ms)
  setTimeout(() => {
    layer.innerHTML = '';
  }, 3000);
}

/* ====================== INICIO ====================== */
render();
</script>
</body>
</html>


